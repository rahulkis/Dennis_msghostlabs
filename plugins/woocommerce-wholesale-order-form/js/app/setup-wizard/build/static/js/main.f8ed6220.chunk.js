(this["webpackJsonpsetup-wizard"]=this["webpackJsonpsetup-wizard"]||[]).push([[0],{128:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(24),c=n.n(s),i=n(80),u=n(129),o=(n(93),n(94),n(13)),p=Object(a.lazy)((function(){return Promise.all([n.e(2),n.e(6)]).then(n.bind(null,299))})),d=function(e){return Object(o.jsx)(a.Suspense,{fallback:Object(o.jsxs)("div",{className:"loading-spinner",children:[Object(o.jsx)(u.a,{})," \xa0Loading..."]}),children:Object(o.jsx)(p,{})})},E=n(17),_=n(81),S=n(36),f=n(15),O=n(8),l={steps:[],generatedOrderForms:[],i18n:[]};var T=Object(E.c)({setupWizard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.ESetupWizardTypes.SET_WIZARD_STEPS:var n=t.payload,a=n.steps,r=n.i18n;return Object(f.a)(Object(f.a)({},e),{},{steps:a,i18n:r});case O.ESetupWizardTypes.SET_API_KEYS:var s=t.payload.data,c=s.consumer_key,i=s.consumer_secret,u=Object(S.a)(e.steps),o=u.find((function(e){return"step2"===e.id}));return"undefined"!==typeof o&&(o.data={is_valid:!0,consumer_key:c,consumer_secret:i}),Object(f.a)(Object(f.a)({},e),{},{steps:e.steps.map((function(e){return"step2"===e.id&&(e.data={is_valid:!0,consumer_key:c,consumer_secret:i}),e}))});case O.ESetupWizardTypes.SET_GENERATED_ORDER_FORMS:return Object(f.a)(Object(f.a)({},e),{},{generatedOrderForms:t.payload.data});default:return e}}}),y=n(14),b=n.n(y),v=n(10),j=n(33),w=n(78),z=n.n(w),R={};"undefined"!==typeof setup_wizard_options&&""!==setup_wizard_options.nonce&&(R={"X-WP-Nonce":setup_wizard_options.nonce});var m=z.a.create({baseURL:setup_wizard_options.root,timeout:0,headers:Object(f.a)({},R)}),x=b.a.mark(h),A=b.a.mark(D),P=b.a.mark(I),W=b.a.mark(g);function h(e){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.b)((function(){return m.get("wwof/v1/setup-wizard/",{params:{migration:setup_wizard_options.migration}})}));case 3:if(!(t=e.sent)||!t.data){e.next=7;break}return e.next=7,Object(v.c)(j.a.setWizardSteps({steps:t.data.steps,i18n:t.data.i18n}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),x,null,[[0,9]])}function D(e){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.b)((function(){return m.post("wwof/v1/api-keys/",{uid:setup_wizard_options.uid})}));case 3:if(!(n=e.sent)||!n.data||!0!==(null===(t=n.data)||void 0===t?void 0:t.success)){e.next=7;break}return e.next=7,Object(v.c)(j.a.setAPIKeys(n.data));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),A,null,[[0,9]])}function I(e){var t,n,a,r,s;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n=e.payload,a=n.successCB,r=n.failCB,c.next=4,Object(v.b)((function(){return m.post("wwof/v1/setup-wizard/",{migration:setup_wizard_options.migration})}));case 4:if(!(s=c.sent)||!s.data||!0!==(null===(t=s.data)||void 0===t?void 0:t.success)){c.next=9;break}return c.next=8,Object(v.c)(j.a.setGeneratedOrderForms(s.data));case 8:"function"===typeof a?a(s):"function"===typeof r&&r();case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),console.log(c.t0);case 14:case"end":return c.stop()}}),P,null,[[0,11]])}function g(e){var t,n,a,r,s;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n=e.payload,a=n.successCB,r=n.failCB,c.next=4,Object(v.b)((function(){return m.post("wwof/v1/setup-wizard/setup-done/")}));case 4:(s=c.sent)&&s.data&&!0===(null===(t=s.data)||void 0===t?void 0:t.success)&&("function"===typeof a?a(s):"function"===typeof r&&r(s)),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),console.log(c.t0);case 11:case"end":return c.stop()}}),W,null,[[0,8]])}var k=[Object(v.d)(O.ESetupWizardTypes.FETCH_STEPS,h),Object(v.d)(O.ESetupWizardTypes.GENERATE_API_KEYS,D),Object(v.d)(O.ESetupWizardTypes.MIGRATE_OLD_FORMS,I),Object(v.d)(O.ESetupWizardTypes.SETUP_DONE,g)],F=b.a.mark(N);function N(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(Object(S.a)(k));case 2:case"end":return e.stop()}}),F)}var G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||E.d,M=Object(_.a)(),K=Object(E.e)(T,G(Object(E.a)(M)));M.run(N);var C=K,Y=n(52),L=n(131);"undefined"!==typeof setup_wizard_options.root?c.a.render(Object(o.jsx)(Y.a,{store:C,children:Object(o.jsx)(i.a,{children:Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(d,{})})})}),document.getElementById("wwof-setup-wizard")):c.a.render(Object(o.jsx)(L.a,{status:"warning",title:"You have missing environment variables. Please see readme.txt for the proper setup."}),document.getElementById("wwof-setup-wizard"))},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(8),r={fetchSteps:function(e){return{type:a.ESetupWizardTypes.FETCH_STEPS,payload:e}},setWizardSteps:function(e){return{type:a.ESetupWizardTypes.SET_WIZARD_STEPS,payload:e}},generateAPIKeys:function(e){return{type:a.ESetupWizardTypes.GENERATE_API_KEYS,payload:e}},setAPIKeys:function(e){return{type:a.ESetupWizardTypes.SET_API_KEYS,payload:e}},migrateOldForms:function(e){return{type:a.ESetupWizardTypes.MIGRATE_OLD_FORMS,payload:e}},setGeneratedOrderForms:function(e){return{type:a.ESetupWizardTypes.SET_GENERATED_ORDER_FORMS,payload:e}},setupDone:function(e){return{type:a.ESetupWizardTypes.SETUP_DONE,payload:e}}}},64:function(e,t){},65:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.FETCH_STEPS="FETCH_STEPS",e.SET_WIZARD_STEPS="SET_WIZARD_STEPS",e.GENERATE_API_KEYS="GENERATE_API_KEYS",e.SET_API_KEYS="SET_API_KEYS",e.MIGRATE_OLD_FORMS="MIGRATE_OLD_FORMS",e.SET_GENERATED_ORDER_FORMS="SET_GENERATED_ORDER_FORMS",e.SETUP_DONE="SETUP_DONE"}(a||(a={}))},8:function(e,t,n){"use strict";var a=n(64);n.o(a,"ESetupWizardTypes")&&n.d(t,"ESetupWizardTypes",(function(){return a.ESetupWizardTypes}));var r=n(65);n.d(t,"ESetupWizardTypes",(function(){return r.a}))},93:function(e,t,n){}},[[128,1,3]]]);
//# sourceMappingURL=main.f8ed6220.chunk.js.map