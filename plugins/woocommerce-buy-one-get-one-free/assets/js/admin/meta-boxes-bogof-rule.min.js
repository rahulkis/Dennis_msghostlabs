!function(a){if("undefined"!=typeof wc_admin_bogof_meta_boxes_params){var e={init:function(){a("#_type").on("change",this.on_type_change).on("change",function(){a("#_buy_product_ids").val(null).trigger("change")}).on("change",this.on_free_qty_keyup),a("#_applies_to").on("change",this.on_applies_to_change),a("#_action").on("change",this.on_action_change),a("#_free_quantity").on("keyup mouseup",this.on_free_qty_keyup).on("blur",this.remove_error_tips),a("#_min_quantity").on("change",this.on_free_qty_keyup),this.on_type_change(),this.on_applies_to_change(),this.on_action_change()},add_error_tip:function(e,o){var _=e.position();0===e.parent().find(".wc_bogof_error_tip").length&&(e.after('<div class="wc_bogof_error_tip '+o+'">'+wc_admin_bogof_meta_boxes_params[o]+"</div>"),e.parent().find(".wc_bogof_error_tip").css("left",_.left+e.width()-e.width()/2-a(".wc_bogof_error_tip").width()/2).css("top",_.top+e.height()).fadeIn("100"))},remove_error_tip:function(e,o){e.parent().find(".wc_bogof_error_tip."+o).fadeOut("100",function(){a(this).remove()})},remove_error_tips:function(){a(this).parent().find(".wc_bogof_error_tip").fadeOut("100",function(){a(this).remove()})},on_type_change:function(){a("#_action").closest("div.options_group").toggle("buy_a_get_b"===a("#_type").val()),a("#_individual").closest("div.options_group").toggle("buy_a_get_b"===a("#_type").val()&&"category"===a("#_applies_to").val()),"buy_a_get_b"!==a("#_type").val()?(a("#_buy_product_ids").data("action","wc_bogof_json_search_free_products"),a("#_buy_product_ids").data("exclude",wc_admin_bogof_meta_boxes_params.incompatible_types)):(a("#_buy_product_ids").data("action",""),a("#_buy_product_ids").data("exclude",""))},on_applies_to_change:function(){a("p._buy_product_ids_field").toggle("product"===a("#_applies_to").val()),a("p._buy_category_ids_field").toggle("category"===a("#_applies_to").val()),a("#_individual").closest("div.options_group").toggle("buy_a_get_b"===a("#_type").val()&&"category"===a("#_applies_to").val())},on_action_change:function(){var e="show_if_"+a("#_action").val();a("p.action_objects_fields").hide(),a("p.action_objects_fields."+e).show()},on_free_qty_keyup:function(){"cheapest_free"!==a("#_type").val()?e.remove_error_tip(a("#_free_quantity"),"i18n_free_less_than_min_error"):parseInt(a("#_min_quantity").val(),10)<=parseInt(a("#_free_quantity").val(),10)?e.add_error_tip(a("#_free_quantity"),"i18n_free_less_than_min_error"):e.remove_error_tip(a("#_free_quantity"),"i18n_free_less_than_min_error")}};e.init(),a("tr.type-shop_bogof_rule").on("click",".wc-bogof-rule-toggle-enabled",function(e){e.preventDefault();var o=a(this),_=o.find(".woocommerce-input-toggle"),t={action:"wc_bogof_toggle_rule_enabled",security:wc_admin_bogof_meta_boxes_params.nonces.rule_toggle,rule_id:o.data("rule_id")};return _.addClass("woocommerce-input-toggle--loading"),a.ajax({url:woocommerce_admin.ajax_url,data:t,dataType:"json",type:"POST",success:function(e){!0===e.data?(_.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),_.addClass("woocommerce-input-toggle--enabled"),_.removeClass("woocommerce-input-toggle--loading")):!1===e.data&&(_.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),_.addClass("woocommerce-input-toggle--disabled"),_.removeClass("woocommerce-input-toggle--loading"))}}),!1})}}(jQuery);