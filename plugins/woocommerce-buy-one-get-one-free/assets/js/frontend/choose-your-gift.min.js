!function(e){var r={init:function(){this.car_form_url="",e(document.body).on("click",'a.button-choose-your-gift[href="#wc-choose-your-gift"]',this.scroll_to_choose_your_gift).on("added_to_cart",this.update_fragments).on("removed_from_cart",this.on_remove_from_cart).on("updated_wc_bogof_div",this.on_updated_wc_bogof_div),this.is_cart()&&(this.car_form_url=e(".woocommerce-cart-form").attr("action"),e(document).ajaxSuccess(this.update_bogof_div)),this.on_updated_wc_bogof_div()},is_blocked:function(){return e("#wc-choose-your-gift").is(".processing")||e("#wc-choose-your-gift").parents(".processing").length},block:function(){r.is_blocked()||e("#wc-choose-your-gift").addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){e("#wc-choose-your-gift").removeClass("processing").unblock()},on_updated_wc_bogof_div:function(){var o=e("#wc-choose-your-gift").data("parameters");e(".choose-your-gift-notice").remove(),e(".button.button-choose-your-gift").closest(".woocommerce-error, .woocommerce-message, .woocommerce-info").addClass("choose-your-gift-notice"),e("#wc-choose-your-gift[data-parameters] .ajax_add_to_cart").data("wc_bogof_data",o)},replace_content:function(o){try{r.block();var t=e.parseHTML(o),c=e("#wc-choose-your-gift",t);e("#wc-choose-your-gift").replaceWith(c),e(document.body).trigger("updated_wc_bogof_div"),r.unblock()}catch(o){window.console.log(o)}},is_cart:function(){var o=e("#wc-choose-your-gift").data("parameters");return void 0!==o.is_cart&&"yes"===o.is_cart&&0<e(".woocommerce-cart-form").length&&0<e("#wc-choose-your-gift").length},scroll_to_choose_your_gift:function(o){e("#wc-choose-your-gift").length<1||(o.preventDefault(),e("html, body").animate({scrollTop:e("#wc-choose-your-gift").offset().top-100},1e3))},on_remove_from_cart:function(){var o=e("#wc-choose-your-gift").data("parameters");r.block(),e.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","bogof_update_choose_your_gift"),o,function(o){r.update_fragments(null,o)})},update_fragments:function(o,t){if(t&&void 0!==t.wc_choose_your_gift_data){var c=t.wc_choose_your_gift_data;if(void 0!==c.cart_redirect&&"yes"===c.cart_redirect)return void(window.location=wc_add_to_cart_params.cart_url);void 0!==c.notice&&r.show_notice(c.notice),void 0!==c.content&&r.replace_content("<div>"+c.content+"</div>")}},show_notice:function(o){$target=e(".choose-your-gift-notice-wrapper:first"),0<$target.length&&($target.empty(),$target.prepend(o),this.is_cart()||e.scroll_to_notices($target))},update_bogof_div:function(o,t,c,e){void 0===c.url||c.url.indexOf(r.car_form_url)<0||r.replace_content(e)}};r.init()}(jQuery);